# 部署与配置说明

本指南详细介绍了如何配置环境并启动“房价预测与爬虫系统”的后端和前端。

---

## 一、后端配置与启动 (Django)

### 1. 环境准备
- **Python 版本**：推荐 3.10 及以上（最低支持 3.8）。
- **数据库**：
  - **MySQL 8.0+**：推荐用于生产和完整功能开发。
  - **SQLite**：支持快速上手，配置简单。

### 2. 依赖安装
建议在虚拟环境中运行：
```bash
cd backend
# 创建虚拟环境
python -m venv venv
# 激活虚拟环境 (Windows)
venv\Scripts\activate
# 激活虚拟环境 (macOS/Linux)
# source venv/bin/activate

# 安装依赖
pip install -r requirements.txt
```

### 3. 环境变量配置 (.env)
在 `backend/` 目录下创建 `.env` 文件，用于管理数据库连接和调试开关：
```env
DEBUG=True               # 开发环境设为 True，生产环境务必设为 False

DB_NAME=lvhai            # 数据库名
DB_USER=root             # 数据库用户名
DB_PASSWORD=你的密码      # 数据库密码
DB_HOST=localhost
DB_PORT=3306

# Django 安全密钥
SECRET_KEY=自行生成的随机字符串
```

### 4. 数据库初始化
```bash
cd backend
# 生成并应用迁移
python manage.py migrate

# (可选) 导入初始数据
# 如果你有 lvhai.sql，可以在 MySQL 命令行中执行：
# mysql -u root -p lvhai < ../database/lvhai.sql
```

### 5. 启动开发服务器
```bash
python manage.py runserver 0.0.0.0:8000
```
默认后端 API 地址为 `http://127.0.0.1:8000/`。

---

## 二、前端配置与启动 (Vue 3)

### 1. 环境要求
- **Node.js**：推荐 16.x 或 18.x 以上版本。
- **包管理工具**：npm (随 Node.js 安装)。

### 2. 安装依赖
```bash
cd frontend
npm install
```

### 3. 启动开发服务器
```bash
npm run dev
```
- 默认访问地址：`http://localhost:5173`。
- 前端通过 Vite 代理自动将 `/api/*` 请求转发到后端 `8000` 端口。

### 4. 生产环境构建
```bash
npm run build
```
生成的静态文件位于 `frontend/dist` 目录。

---

## 三、常见问题排查
1. **数据库连接失败**：请检查 `.env` 中的密码和端口是否正确，并确保 MySQL 服务已启动。
2. **依赖安装缓慢**：建议使用国内镜像源（如清华或阿里镜像）。
3. **跨域问题**：开发环境下 Vite 代理已配置好，生产环境建议使用 Nginx 进行反向代理。
